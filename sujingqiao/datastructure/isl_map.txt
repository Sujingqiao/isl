éå¸¸æ£’çš„è¯·æ±‚ï¼ä½ ç»™å‡ºçš„æ˜¯ä¸€ç»„æ¥è‡ª `isl_map_private.h` æˆ–ç±»ä¼¼å†…éƒ¨å¤´æ–‡ä»¶çš„ **ISLï¼ˆInteger Set Libraryï¼‰æ ¸å¿ƒæ„é€ ä¸æ“ä½œå‡½æ•°**ã€‚æˆ‘ä»¬å°†è¿™äº›æ¥å£æŒ‰ç…§ **å¤„ç†é€»è¾‘ï¼ˆæ“ä½œç±»å‹ï¼‰** è¿›è¡Œåˆ†ç»„ï¼Œå…è®¸å‡½æ•°é‡å¤å‡ºç°åœ¨å¤šä¸ªç»„ä¸­ï¼ˆå› ä¸ºä¸€ä¸ªå‡½æ•°å¯èƒ½æœåŠ¡äºå¤šä¸ªç›®çš„ï¼‰ï¼Œå¹¶å¯¹æ¯ä¸ªå‡½æ•°è¿›è¡Œ **è¯¦ç»†æ³¨é‡Š**ï¼Œè¯´æ˜å…¶ä½œç”¨ã€å‚æ•°å«ä¹‰å’Œä½¿ç”¨åœºæ™¯ã€‚

---

## ğŸ”¹ åˆ†ç»„ 1ï¼šåŸºç¡€é›†åˆ/æ˜ å°„çš„åˆ›å»ºä¸å†…å­˜åˆ†é…

> **å¤„ç†é€»è¾‘**ï¼šä¸º `isl_basic_set` æˆ– `isl_basic_map` åˆ†é…å†…å­˜ç©ºé—´ï¼Œåˆå§‹åŒ–ç»“æ„ä½“å­—æ®µï¼Œå‡†å¤‡åç»­æ·»åŠ çº¦æŸã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_set *isl_basic_set_alloc(isl_ctx *ctx, unsigned nparam, unsigned dim, unsigned extra, unsigned n_eq, unsigned n_ineq);` | åˆ›å»ºä¸€ä¸ªæ–°çš„ `isl_basic_set`ã€‚å‚æ•°ï¼š<br> - `ctx`: ä¸Šä¸‹æ–‡<br> - `nparam`: å‚æ•°æ•°é‡<br> - `dim`: å˜é‡ç»´åº¦ï¼ˆå¦‚ i,jï¼‰<br> - `extra`: é¢å¤–ä¿ç•™ç©ºé—´ï¼ˆç”¨äºæœªæ¥æ’å…¥ div æˆ–ç»´åº¦ï¼‰<br> - `n_eq`: é¢„åˆ†é…ç­‰å¼æ•°é‡<br> - `n_ineq`: é¢„åˆ†é…ä¸ç­‰å¼æ•°é‡<br> è¿”å›ä¸€ä¸ªç©ºçš„ `basic_set`ï¼Œä½†å·²åˆ†é…å¥½çº¦æŸæ•°ç»„ç©ºé—´ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_alloc(isl_ctx *ctx, unsigned nparam, unsigned in, unsigned out, unsigned extra, unsigned n_eq, unsigned n_ineq);` | ç±»ä¼¼ä¸Šè€…ï¼Œä½†ç”¨äº `isl_basic_map`ï¼ˆæœ‰è¾“å…¥/è¾“å‡ºç»´åº¦ï¼‰ã€‚`in` æ˜¯è¾“å…¥ç»´åº¦æ•°ï¼Œ`out` æ˜¯è¾“å‡ºç»´åº¦æ•°ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_alloc_space(__isl_take isl_space *space, unsigned extra, unsigned n_eq, unsigned n_ineq);` | ä½¿ç”¨å·²æ„å»ºçš„ `isl_space` æ¥åˆ›å»º `basic_set`ã€‚æ›´é«˜çº§çš„æ¥å£ï¼Œç©ºé—´ç»“æ„å·²å®šä¹‰å¥½ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_alloc_space(__isl_take isl_space *space, unsigned extra, unsigned n_eq, unsigned n_ineq);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 2ï¼šæ‰©å±•é¢„åˆ†é…ç©ºé—´ï¼ˆåŠ¨æ€å¢é•¿ï¼‰

> **å¤„ç†é€»è¾‘**ï¼šåœ¨å·²æœ‰çš„ `basic_set/map` åŸºç¡€ä¸Šï¼Œæ‰©å±•å…¶å¯å®¹çº³çš„çº¦æŸæˆ–ç»´åº¦æ•°é‡ï¼Œé¿å…é¢‘ç¹ reallocã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_set *isl_basic_set_extend_constraints(__isl_take isl_basic_set *base, unsigned n_eq, unsigned n_ineq);` | æ‰©å±• `base` çš„ç­‰å¼å’Œä¸ç­‰å¼æ•°ç»„å®¹é‡ï¼Œä½†ä¸ç«‹å³æ·»åŠ çº¦æŸã€‚ç”¨äºé¢„ä¼°åç»­è¦åŠ å¾ˆå¤šçº¦æŸæ—¶ä¼˜åŒ–æ€§èƒ½ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_extend_constraints(__isl_take isl_basic_map *base, unsigned n_eq, unsigned n_ineq);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_extend(__isl_take isl_basic_map *base, unsigned extra, unsigned n_eq, unsigned n_ineq);` | æ›´å…¨é¢çš„æ‰©å±•ï¼šå¯åŒæ—¶æ‰©å±• `extra` ç©ºé—´ï¼ˆå¦‚ divï¼‰ã€ç­‰å¼ã€ä¸ç­‰å¼ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_extend(__isl_take isl_basic_set *base, unsigned extra, unsigned n_eq, unsigned n_ineq);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |
| `__isl_give isl_map *isl_map_grow(__isl_take isl_map *map, int n);` | æ‰©å±• `isl_map` çš„ `p[]` æ•°ç»„å®¹é‡ï¼Œä½¿å…¶èƒ½å®¹çº³æ›´å¤š `basic_map`ã€‚`n` æ˜¯æ–°å¢å®¹é‡ã€‚ |
| `__isl_give isl_set *isl_set_grow(__isl_take isl_set *set, int n);` | åŒä¸Šï¼Œç”¨äº `isl_set`ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 3ï¼šçº¦æŸçš„åŠ¨æ€æ·»åŠ ä¸ç®¡ç†

> **å¤„ç†é€»è¾‘**ï¼šå‘ `basic_set/map` ä¸­åŠ¨æ€æ·»åŠ ç­‰å¼æˆ–ä¸ç­‰å¼çº¦æŸï¼Œå¹¶ç®¡ç†å…¶å†…éƒ¨æ•°ç»„ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `int isl_basic_map_alloc_equality(__isl_keep isl_basic_map *bmap);` | è¯·æ±‚ä¸º `bmap` åˆ†é…ä¸€ä¸ªæ–°çš„ç­‰å¼æ§½ä½ï¼ˆç´¢å¼•ï¼‰ï¼Œè¿”å›å…¶ä½ç½®ï¼ˆ>=0ï¼‰ï¼Œå¤±è´¥è¿”å› -1ã€‚ä¸åˆå§‹åŒ–å†…å®¹ã€‚ |
| `int isl_basic_set_alloc_equality(__isl_keep isl_basic_set *bset);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |
| `int isl_basic_map_alloc_inequality(__isl_keep isl_basic_map *bmap);` | è¯·æ±‚åˆ†é…ä¸€ä¸ªä¸ç­‰å¼æ§½ä½ï¼Œè¿”å›ç´¢å¼•ã€‚ |
| `int isl_basic_set_alloc_inequality(__isl_keep isl_basic_set *bset);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_add_eq(__isl_take isl_basic_set *bset, isl_int *eq);` | å°†ç³»æ•°æ•°ç»„ `eq` ä½œä¸ºæ–°ç­‰å¼æ·»åŠ åˆ° `bset`ã€‚`eq` æ ¼å¼ï¼š[cst, p0..pn, v0..vm] |
| `__isl_give isl_basic_map *isl_basic_map_add_eq(__isl_take isl_basic_map *bmap, isl_int *eq);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_add_ineq(__isl_take isl_basic_set *bset, isl_int *ineq);` | æ·»åŠ ä¸€ä¸ªä¸ç­‰å¼ï¼ˆâ‰¥0 å½¢å¼ï¼‰ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_add_ineq(__isl_take isl_basic_map *bmap, isl_int *ineq);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |
| `void isl_basic_map_inequality_to_equality(__isl_keep isl_basic_map *bmap, unsigned pos);` | å°†ä½ç½® `pos` çš„ä¸ç­‰å¼**è½¬æ¢ä¸ºç­‰å¼**ï¼ˆé€šå¸¸ç”¨äºæ£€æµ‹åˆ°ä¸¤ä¸ªä¸ç­‰å¼äº’ä¸ºç›¸åæ•°æ—¶ï¼‰ã€‚ |
| `int isl_basic_map_drop_equality(__isl_keep isl_basic_map *bmap, unsigned pos);` | åˆ é™¤ä½ç½® `pos` çš„ç­‰å¼ï¼Œå°†å…¶ç§»è‡³æœ«å°¾å¹¶å‡å°‘è®¡æ•°ã€‚ |
| `int isl_basic_set_drop_inequality(__isl_keep isl_basic_set *bset, unsigned pos);`<br>`int isl_basic_map_drop_inequality(__isl_keep isl_basic_map *bmap, unsigned pos);` | åˆ é™¤æŒ‡å®šä½ç½®çš„ä¸ç­‰å¼ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 4ï¼šé™¤æ³•ï¼ˆDiv / Floor Expressionï¼‰ç®¡ç†

> **å¤„ç†é€»è¾‘**ï¼šç®¡ç† `basic_map/set` ä¸­çš„ `div` è¡¨è¾¾å¼ï¼ˆå½¢å¦‚ `e = âŒŠ(aÂ·x + b)/dâŒ‹`ï¼‰ï¼Œç”¨äºè¡¨ç¤ºå‘ä¸‹å–æ•´æˆ–æ¨¡è¿ç®—ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `int isl_basic_map_alloc_div(__isl_keep isl_basic_map *bmap);` | ä¸º `bmap` åˆ†é…ä¸€ä¸ªæ–°çš„ `div` æ§½ä½ï¼Œè¿”å›å…¶ç´¢å¼•ï¼ˆåœ¨ `div` æ•°ç»„ä¸­çš„ä½ç½®ï¼‰ã€‚ |
| `int isl_basic_set_alloc_div(__isl_keep isl_basic_set *bset);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_insert_div(__isl_take isl_basic_map *bmap, int pos, __isl_keep isl_vec *div);` | åœ¨ä½ç½® `pos` æ’å…¥ä¸€ä¸ª `div` è¡¨è¾¾å¼ï¼ˆ`div` å‘é‡æ ¼å¼ï¼š[d, b, a0...an]ï¼‰ã€‚ |
| `isl_stat isl_basic_map_free_div(__isl_keep isl_basic_map *bmap, unsigned n);` | æ ‡è®°ç¬¬ `n` ä¸ª `div` ä¸ºç©ºé—²ï¼ˆä¸é‡Šæ”¾å†…å­˜ï¼Œä»…æ ‡è®°ï¼‰ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_drop_div(__isl_take isl_basic_map *bmap, unsigned div);` | ä» `bmap` ä¸­ç§»é™¤ç¬¬ `div` ä¸ª `div` è¡¨è¾¾å¼ï¼Œå¹¶è°ƒæ•´çº¦æŸå¼•ç”¨ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 5ï¼šæœ€ç»ˆåŒ–ä¸è§„èŒƒåŒ–ï¼ˆFinalize & Simplifyï¼‰

> **å¤„ç†é€»è¾‘**ï¼šåœ¨æ·»åŠ å®Œæ‰€æœ‰çº¦æŸåï¼Œå¯¹ `basic_set/map` è¿›è¡Œæ¸…ç†ã€æ’åºã€å»é‡ã€è§„èŒƒåŒ–ï¼Œä½¿å…¶æˆä¸ºâ€œæ ‡å‡†å½¢å¼â€ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_set *isl_basic_set_finalize(__isl_take isl_basic_set *bset);` | æ ‡è®° `bset` ä¸ºâ€œæœ€ç»ˆçŠ¶æ€â€ï¼šç§»é™¤æœªä½¿ç”¨çš„çº¦æŸæ§½ä½ï¼Œæ’åºçº¦æŸï¼Œå‡†å¤‡ç”¨äºåç»­æ“ä½œï¼ˆå¦‚äº¤é›†ï¼‰ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_finalize(__isl_take isl_basic_map *bmap);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_mark_final(__isl_take isl_basic_map *bmap);` | ä»…æ ‡è®°ä¸º finalï¼Œä¸è¿›è¡Œå®é™…æ¸…ç†ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_simplify(__isl_take isl_basic_set *bset);` | å°è¯•ç®€åŒ– `bset`ï¼šå¦‚æ£€æµ‹éšå«ç­‰å¼ã€ç§»é™¤å†—ä½™ä¸ç­‰å¼ç­‰ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_simplify(__isl_take isl_basic_map *bmap);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 6ï¼šé›†åˆ/æ˜ å°„çš„åˆå¹¶ä¸æ„å»º

> **å¤„ç†é€»è¾‘**ï¼šå°†å¤šä¸ª `basic_set/map` åˆå¹¶åˆ°ä¸€ä¸ª `set/map` ä¸­ï¼Œæ„å»ºéå‡¸é›†åˆã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_set *isl_set_add_basic_set(__isl_take isl_set *set, __isl_take isl_basic_set *bset);` | å°† `bset` æ·»åŠ åˆ° `set` çš„ `p[]` æ•°ç»„ä¸­ã€‚è‹¥ `set` ä¸ºç©ºåˆ™åˆ›å»ºï¼›å¦åˆ™æ‰©å±•å¹¶è¿½åŠ ã€‚ |
| `__isl_give isl_map *isl_map_add_basic_map(__isl_take isl_map *map, __isl_take isl_basic_map *bmap);` | åŒä¸Šï¼Œç”¨äº `isl_map`ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 7ï¼šç©ºé—´ï¼ˆSpaceï¼‰ç®¡ç†ä¸é‡ç½®

> **å¤„ç†é€»è¾‘**ï¼šè·å–æˆ–æ›¿æ¢ `basic_set/map` çš„ç»´åº¦ç»“æ„ï¼ˆå‚æ•°ã€å˜é‡åç­‰ï¼‰ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_keep isl_space *isl_basic_map_peek_space(__isl_keep const isl_basic_map *bmap);` | è·å– `bmap` çš„ç©ºé—´ç»“æ„ï¼ˆä¸å¢åŠ å¼•ç”¨ï¼‰ã€‚ |
| `__isl_keep isl_space *isl_basic_set_peek_space(__isl_keep isl_basic_set *bset);`<br>`__isl_keep isl_space *isl_map_peek_space(__isl_keep const isl_map *map);`<br>`__isl_keep isl_space *isl_set_peek_space(__isl_keep isl_set *set);` | åŒä¸Šï¼Œç”¨äºå…¶ä»–ç±»å‹ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_reset_space(__isl_take isl_basic_set *bset, __isl_take isl_space *space);` | å°† `bset` çš„ç©ºé—´ç»“æ„æ›¿æ¢ä¸º `space`ã€‚ç”¨äºå¯¹é½ç»´åº¦ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_reset_space(__isl_take isl_basic_map *bmap, __isl_take isl_space *space);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |
| `__isl_give isl_map *isl_map_reset_space(__isl_take isl_map *map, __isl_take isl_space *space);` | æ›¿æ¢æ•´ä¸ª `map` çš„ç©ºé—´ç»“æ„ã€‚ |
| `__isl_give isl_map *isl_map_reset_equal_dim_space(__isl_take isl_map *map, __isl_take isl_space *space);` | é‡ç½®ç©ºé—´ï¼Œä½†è¦æ±‚è¾“å…¥/è¾“å‡ºç»´åº¦æ•°åŒ¹é…ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_from_underlying_set(__isl_take isl_basic_set *bset, __isl_take isl_basic_set *like);` | å°† `bset` çš„ç©ºé—´ç»“æ„æ”¹ä¸ºä¸ `like` ç›¸åŒï¼ˆæ·±å±‚å¯¹é½ï¼‰ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 8ï¼šç»´åº¦åç§»ä¸ç´¢å¼•è®¡ç®—

> **å¤„ç†é€»è¾‘**ï¼šè®¡ç®—æŸä¸ªç»´åº¦ç±»å‹ï¼ˆå¦‚å‚æ•°ã€è¾“å…¥ã€è¾“å‡ºï¼‰åœ¨çº¦æŸå‘é‡ä¸­çš„èµ·å§‹åç§»ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `isl_size isl_basic_map_var_offset(__isl_keep isl_basic_map *bmap, enum isl_dim_type type);` | è¿”å› `type` ç±»å‹å˜é‡åœ¨çº¦æŸå‘é‡ä¸­çš„èµ·å§‹ç´¢å¼•ï¼ˆè€ƒè™‘å‚æ•°ã€è¾“å…¥ç­‰å‰ç½®ç»´åº¦ï¼‰ã€‚ |
| `isl_size isl_basic_set_var_offset(__isl_keep isl_basic_set *bset, enum isl_dim_type type);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |
| `unsigned isl_basic_map_offset(__isl_keep isl_basic_map *bmap, enum isl_dim_type type);`<br>`unsigned isl_basic_set_offset(__isl_keep isl_basic_set *bset, enum isl_dim_type type);` | åŒä¸Šï¼Œè¿”å› `unsigned` ç±»å‹ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 9ï¼šå…¼å®¹æ€§ä¸ç±»å‹æ£€æŸ¥

> **å¤„ç†é€»è¾‘**ï¼šæ£€æŸ¥ä¸¤ä¸ªé›†åˆæˆ–æ˜ å°„æ˜¯å¦å…·æœ‰å…¼å®¹çš„ç»´åº¦ç»“æ„ï¼Œèƒ½å¦è¿›è¡Œäº¤é›†ã€å¹¶é›†ç­‰æ“ä½œã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `isl_bool isl_basic_map_may_be_set(__isl_keep isl_basic_map *bmap);` | åˆ¤æ–­ `bmap` æ˜¯å¦å¯ä»¥è§†ä¸ºä¸€ä¸ªé›†åˆï¼ˆå³è¾“å…¥=è¾“å‡ºï¼Œä¸”æ— å‡½æ•°è¯­ä¹‰ï¼‰ã€‚ |
| `int isl_map_may_be_set(__isl_keep isl_map *map);` | åˆ¤æ–­æ•´ä¸ª `map` æ˜¯å¦å¯è§†ä¸ºé›†åˆã€‚ |
| `isl_bool isl_map_compatible_domain(__isl_keep isl_map *map, __isl_keep isl_set *set);` | æ£€æŸ¥ `map` çš„åŸŸï¼ˆdomainï¼‰ä¸ `set` æ˜¯å¦å…¼å®¹ï¼ˆå‚æ•°å’Œè¾“å…¥ç»´åº¦åŒ¹é…ï¼‰ã€‚ |
| `isl_bool isl_basic_map_compatible_domain(__isl_keep isl_basic_map *bmap, __isl_keep isl_basic_set *bset);` | åŒä¸Šï¼Œç”¨äº `basic` ç±»å‹ã€‚ |
| `isl_bool isl_basic_map_compatible_range(__isl_keep isl_basic_map *bmap, __isl_keep isl_basic_set *bset);` | æ£€æŸ¥ `bmap` çš„å€¼åŸŸï¼ˆrangeï¼‰ä¸ `bset` æ˜¯å¦å…¼å®¹ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 10ï¼šå¤åˆ¶ä¸é‡æ’ï¼ˆReorderingï¼‰

> **å¤„ç†é€»è¾‘**ï¼šå¤åˆ¶ç»“æ„æˆ–å°†ç»´åº¦é‡æ–°æ’åˆ—ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_set *isl_basic_set_dup(__isl_keep isl_basic_set *bset);` | æ·±æ‹·è´ä¸€ä¸ª `basic_set`ï¼ˆå¢åŠ å¼•ç”¨è®¡æ•°æˆ–å¤åˆ¶ï¼‰ã€‚ |
| `__isl_give isl_map *isl_map_dup(__isl_keep isl_map *map);` | æ·±æ‹·è´æ•´ä¸ª `map`ã€‚ |
| `__isl_give isl_map *isl_map_realign(__isl_take isl_map *map, __isl_take isl_reordering *r);` | æ ¹æ®é‡æ’åº `r` è°ƒæ•´ `map` çš„ç»´åº¦é¡ºåºï¼ˆå¦‚å‚æ•°é‡æ’ï¼‰ã€‚ |
| `__isl_give isl_set *isl_set_realign(__isl_take isl_set *set, __isl_take isl_reordering *r);` | åŒä¸Šï¼Œç”¨äº `set`ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 11ï¼šæˆå‘˜åˆ¤æ–­ï¼ˆContainmentï¼‰

> **å¤„ç†é€»è¾‘**ï¼šæ£€æŸ¥æŸä¸ªç‚¹æ˜¯å¦å±äºé›†åˆæˆ–æ˜ å°„ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `isl_bool isl_basic_set_contains(__isl_keep isl_basic_set *bset, __isl_keep isl_vec *vec);` | æ£€æŸ¥å‘é‡ `vec`ï¼ˆä»£è¡¨ä¸€ä¸ªç‚¹ï¼‰æ˜¯å¦æ»¡è¶³ `bset` çš„æ‰€æœ‰çº¦æŸã€‚ |
| `isl_bool isl_basic_map_contains(__isl_keep isl_basic_map *bmap, __isl_keep isl_vec *vec);` | æ£€æŸ¥ç‚¹ `vec` æ˜¯å¦åœ¨ `bmap` ä¸­ï¼ˆ`vec` æ ¼å¼ï¼š[in..., out...]ï¼‰ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 12ï¼šé‡ç½®ç»´åº¦ç±»å‹

> **å¤„ç†é€»è¾‘**ï¼šå°† `basic_map/set` çš„ç»´åº¦ç±»å‹ä¿¡æ¯é‡ç½®ï¼ˆå¦‚æ¸…é™¤åå­—ã€å¯¹é½ç»“æ„ï¼‰ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_map *isl_basic_map_reset(__isl_take isl_basic_map *bmap, enum isl_dim_type type);` | é‡ç½® `bmap` çš„ `type` ç±»å‹ç»´åº¦ä¿¡æ¯ï¼ˆå¦‚åå­—ã€å¯¹é½ï¼‰ã€‚ |
| `__isl_give isl_map *isl_map_reset(__isl_take isl_map *map, enum isl_dim_type type);` | é‡ç½®æ•´ä¸ª `map` çš„æŒ‡å®šç»´åº¦ç±»å‹ä¿¡æ¯ã€‚ |

---

## âœ… æ€»ç»“ï¼šå‡½æ•°è®¾è®¡æ¨¡å¼

| ç»„åˆ« | æ ¸å¿ƒç›®æ ‡ |
|------|--------|
| åˆ›å»º/åˆ†é… | æ„å»ºåˆå§‹ç»“æ„ |
| æ‰©å±• | åŠ¨æ€å¢é•¿ï¼Œé¿å… realloc |
| çº¦æŸç®¡ç† | æ·»åŠ ã€åˆ é™¤ã€è½¬æ¢çº¦æŸ |
| Div ç®¡ç† | å¤„ç† floor è¡¨è¾¾å¼ |
| æœ€ç»ˆåŒ– | è§„èŒƒåŒ–ã€æ’åºã€å»é‡ |
| åˆå¹¶ | æ„å»ºéå‡¸é›†åˆ |
| ç©ºé—´ç®¡ç† | ç»´åº¦å¯¹é½ä¸é‡å‘½å |
| åç§»è®¡ç®— | çº¦æŸå‘é‡ç´¢å¼•å®šä½ |
| å…¼å®¹æ€§æ£€æŸ¥ | å®‰å…¨æ“ä½œå‰æ |
| å¤åˆ¶/é‡æ’ | ç»“æ„å˜æ¢ |
| æˆå‘˜åˆ¤æ–­ | ç‚¹æŸ¥è¯¢ |
| é‡ç½® | æ¸…é™¤å…ƒä¿¡æ¯ |

---

è¿™äº›å‡½æ•°æ„æˆäº† ISL **å¤šé¢ä½“æ„é€ å¼•æ“** çš„åº•å±‚éª¨æ¶ã€‚ç†è§£å®ƒä»¬æœ‰åŠ©äºï¼š
- è°ƒè¯• ISL è¡Œä¸º
- å®ç°è‡ªå®šä¹‰æ„é€ é€»è¾‘
- ä¼˜åŒ–æ€§èƒ½ï¼ˆå¦‚é¢„åˆ†é…ï¼‰
- è´¡çŒ® ISL æºç 

å¦‚æœä½ éœ€è¦ï¼Œæˆ‘å¯ä»¥ä¸ºä½ ç”»å‡º **`isl_basic_set` æ„é€ æµç¨‹å›¾** æˆ– **çº¦æŸæ·»åŠ çš„ç”Ÿå‘½å‘¨æœŸç¤ºä¾‹ä»£ç **ã€‚æ˜¯å¦éœ€è¦ï¼Ÿ


éå¸¸å¥½ï¼ä½ æä¾›çš„æ˜¯ä¸€ç»„ **ISLï¼ˆInteger Set Libraryï¼‰ä¸­å…³äº `isl_basic_set` å’Œ `isl_basic_map` çš„é«˜çº§æ“ä½œã€ä¼˜åŒ–ã€å½’ä¸€åŒ–ã€æ¶ˆé™¤ã€ç®€åŒ–å’Œç»“æ„ç®¡ç†** çš„æ ¸å¿ƒå‡½æ•°ã€‚æˆ‘ä»¬å°†è¿™äº›å‡½æ•°æŒ‰ç…§ **å¤„ç†é€»è¾‘ï¼ˆæ“ä½œç›®çš„ï¼‰** è¿›è¡Œåˆ†ç»„ï¼Œå…è®¸å‡½æ•°é‡å¤å‡ºç°åœ¨å¤šä¸ªç»„ä¸­ï¼ˆå› ä¸ºä¸€ä¸ªå‡½æ•°å¯èƒ½æœåŠ¡äºå¤šä¸ªç›®çš„ï¼‰ï¼Œå¹¶å¯¹æ¯ä¸ªå‡½æ•°è¿›è¡Œ **è¯¦ç»†æ³¨é‡Š**ï¼Œè¯´æ˜å…¶ä½œç”¨ã€å‚æ•°å«ä¹‰å’Œä½¿ç”¨åœºæ™¯ã€‚

---

## ğŸ”¹ åˆ†ç»„ 1ï¼šçº¦æŸæ”¶ç´§ä¸æ¾å¼›ï¼ˆTightening & Relaxationï¼‰

> **å¤„ç†é€»è¾‘**ï¼šè°ƒæ•´çº¦æŸè¾¹ç•Œï¼Œä½¿å…¶æ›´ç´§æˆ–æ›´æ¾ï¼Œç”¨äºè¿‘ä¼¼æˆ–æ•°å€¼ç¨³å®šæ€§ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_set *isl_basic_set_tighten_outward(__isl_take isl_basic_set *bset, __isl_keep isl_vec *vec);` | **å‘å¤–æ”¶ç´§** `bset` çš„è¾¹ç•Œï¼Œä½¿å¾— `vec` æ‰€ä»£è¡¨çš„ç‚¹åˆšå¥½è½åœ¨é›†åˆå†…éƒ¨æˆ–è¾¹ç•Œä¸Šã€‚ç”¨äºä¿®å¤ç”±äºæ•°å€¼è¯¯å·®å¯¼è‡´ç‚¹è¢«é”™è¯¯æ’é™¤çš„æƒ…å†µã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 2ï¼šçº¦æŸå–åä¸æ¯”è¾ƒ

> **å¤„ç†é€»è¾‘**ï¼šå¯¹çº¦æŸè¿›è¡Œé€»è¾‘æ“ä½œæˆ–æ¯”è¾ƒï¼Œç”¨äºæ£€æµ‹å†—ä½™ã€å¯¹ç§°æ€§ç­‰ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_map *isl_inequality_negate(__isl_take isl_basic_map *bmap, unsigned pos);` | å°† `bmap` ä¸­ä½ç½® `pos` çš„ä¸ç­‰å¼å–åï¼ˆå³ `â‰¥0` å˜ä¸º `â‰¤-1`ï¼‰ï¼Œç”¨äºæ„é€ è¡¥é›†æˆ–æ£€æµ‹çŸ›ç›¾ã€‚ |
| `int isl_basic_map_constraint_cmp(__isl_keep isl_basic_map *bmap, isl_int *c1, isl_int *c2);` | æ¯”è¾ƒä¸¤ä¸ªçº¦æŸå‘é‡ `c1` å’Œ `c2` çš„â€œå­—å…¸åºâ€ï¼Œç”¨äºæ’åºã€‚ |
| `int isl_basic_map_plain_cmp(__isl_keep isl_basic_map *bmap1, __isl_keep isl_basic_map *bmap2);` | æ¯”è¾ƒä¸¤ä¸ª `basic_map` æ˜¯å¦â€œå®Œå…¨ç›¸åŒâ€ï¼ˆåŒ…æ‹¬çº¦æŸé¡ºåºã€div ç­‰ï¼‰ï¼Œè¿”å› -1,0,1ã€‚ |
| `isl_bool isl_basic_map_plain_is_equal(__isl_keep isl_basic_map *bmap1, __isl_keep isl_basic_map *bmap2);` | åˆ¤æ–­ä¸¤ä¸ª `basic_map` æ˜¯å¦å®Œå…¨ç›¸ç­‰ï¼ˆç»“æ„ã€çº¦æŸã€div éƒ½ç›¸åŒï¼‰ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 3ï¼šé«˜æ–¯æ¶ˆå…ƒä¸çº¦æŸç®€åŒ–ï¼ˆGauss Eliminationï¼‰

> **å¤„ç†é€»è¾‘**ï¼šä½¿ç”¨é«˜æ–¯æ¶ˆå…ƒæ³•æ¶ˆé™¤å˜é‡æˆ–ç®€åŒ–çº¦æŸç³»ç»Ÿï¼Œå¸¸ç”¨äºå˜é‡æ¶ˆé™¤æˆ–å†—ä½™æ£€æµ‹ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_map *isl_basic_map_gauss(__isl_take isl_basic_map *bmap, int *progress);` | å¯¹ `bmap` çš„ç­‰å¼ç³»ç»Ÿè¿›è¡Œ**é«˜æ–¯æ¶ˆå…ƒ**ï¼Œæ¶ˆé™¤å˜é‡ï¼Œç®€åŒ–ç³»ç»Ÿã€‚`progress` è¾“å‡ºæ˜¯å¦å‘ç”Ÿç®€åŒ–ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_gauss(__isl_take isl_basic_set *bset, int *progress);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_gauss5(__isl_take isl_basic_map *bmap, int *progress, isl_stat (*swap)(unsigned a, unsigned b, void *user), isl_stat (*drop)(unsigned n, void *user), void *user);` | å¸¦å›è°ƒçš„é«˜æ–¯æ¶ˆå…ƒï¼Œå…è®¸ç”¨æˆ·å¹²é¢„è¡Œäº¤æ¢æˆ–çº¦æŸåˆ é™¤ï¼Œç”¨äºè‡ªå®šä¹‰ç®€åŒ–ç­–ç•¥ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 4ï¼šçº¦æŸæ’åºä¸å½’ä¸€åŒ–ï¼ˆSorting & Normalizationï¼‰

> **å¤„ç†é€»è¾‘**ï¼šå¯¹çº¦æŸæˆ– `div` è¿›è¡Œæ’åºï¼Œæˆ–å½’ä¸€åŒ–ç³»æ•°ï¼Œä½¿è¡¨è¾¾å¼æ ‡å‡†åŒ–ï¼Œä¾¿äºæ¯”è¾ƒæˆ–åˆå¹¶ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_map *isl_basic_map_sort_constraints(__isl_take isl_basic_map *bmap);` | å°† `bmap` çš„ç­‰å¼å’Œä¸ç­‰å¼åˆ†åˆ«æŒ‰å­—å…¸åºæ’åºï¼Œä¾¿äºåç»­æ¯”è¾ƒæˆ–å»é‡ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_sort_constraints(__isl_take isl_basic_set *bset);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_normalize_constraints(__isl_take isl_basic_map *bmap);` | å½’ä¸€åŒ–æ‰€æœ‰çº¦æŸçš„ç³»æ•°ï¼šä½¿ç¬¬ä¸€ä¸ªéé›¶ç³»æ•°ä¸ºæ­£ï¼Œå¹¶çº¦å»æœ€å¤§å…¬çº¦æ•°ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_normalize_constraints(__isl_take isl_basic_set *bset);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_sort_divs(__isl_take isl_basic_set *bset);` | å¯¹ `bset` ä¸­çš„ `div` è¡¨è¾¾å¼è¿›è¡Œæ’åºã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_sort_divs(__isl_take isl_basic_map *bmap);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |
| `__isl_give isl_map *isl_map_sort_divs(__isl_take isl_map *map);` | å¯¹æ•´ä¸ª `map` ä¸­æ‰€æœ‰ `basic_map` çš„ `div` è¿›è¡Œæ’åºã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 5ï¼šDivï¼ˆFloor Expressionï¼‰ç®¡ç†ä¸ä¼˜åŒ–

> **å¤„ç†é€»è¾‘**ï¼šå¤„ç†å’Œä¼˜åŒ– `div` è¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬å¯¹é½ã€æ¶ˆé™¤ã€æ·»åŠ çº¦æŸç­‰ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_map *isl_basic_map_swap_div(__isl_take isl_basic_map *bmap, int a, int b);` | äº¤æ¢ `bmap` ä¸­ç¬¬ `a` å’Œç¬¬ `b` ä¸ª `div` çš„ä½ç½®ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_order_divs(__isl_take isl_basic_map *bmap);` | å¯¹ `div` æŒ‰ä¾èµ–å…³ç³»æ’åºï¼Œç¡®ä¿å‰å‘ä¾èµ–æ­£ç¡®ã€‚ |
| `__isl_give isl_map *isl_map_order_divs(__isl_take isl_map *map);` | å¯¹æ•´ä¸ª `map` ä¸­æ‰€æœ‰ `basic_map` çš„ `div` æ’åºã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_align_divs(__isl_take isl_basic_map *dst, __isl_keep isl_basic_map *src);` | å°† `dst` çš„ `div` ç»“æ„å¯¹é½åˆ° `src`ï¼Œä¾¿äºåç»­æ“ä½œï¼ˆå¦‚äº¤é›†ï¼‰ã€‚ |
| `__isl_give isl_map *isl_map_align_divs_to_basic_map_list(__isl_take isl_map *map, __isl_keep isl_basic_map_list *list);` | å°† `map` çš„æ‰€æœ‰ `basic_map` çš„ `div` å¯¹é½åˆ° `list` ä¸­çš„ç»“æ„ã€‚ |
| `__isl_give isl_basic_map_list *isl_basic_map_list_align_divs_to_basic_map(__isl_take isl_basic_map_list *list, __isl_keep isl_basic_map *bmap);` | å°† `list` ä¸­æ‰€æœ‰ `basic_map` çš„ `div` å¯¹é½åˆ° `bmap` çš„ç»“æ„ã€‚ |
| `__isl_give isl_map *isl_map_align_divs_internal(__isl_take isl_map *map);` | å†…éƒ¨å‡½æ•°ï¼Œç»Ÿä¸€ `map` å†…æ‰€æœ‰ `basic_map` çš„ `div` ç»“æ„ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_add_div_constraint(__isl_take isl_basic_map *bmap, unsigned div, int sign);` | ä¸ºç¬¬ `div` ä¸ª `div` æ·»åŠ ä¸€ä¸ªçº¦æŸï¼ˆå¦‚ `e â‰¥ ...` æˆ– `e â‰¤ ...`ï¼‰ï¼Œ`sign` æ§åˆ¶æ–¹å‘ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_add_div_constraints(__isl_take isl_basic_map *bmap, unsigned div);` | ä¸º `div` æ·»åŠ æ‰€æœ‰æ ‡å‡†çš„ä¸Šä¸‹ç•Œçº¦æŸï¼ˆ`e â‰¥ lower`, `e â‰¤ upper`ï¼‰ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_add_known_div_constraints(__isl_take isl_basic_map *bmap);` | ä¸ºæ‰€æœ‰ `div` æ·»åŠ å·²çŸ¥çš„çº¦æŸï¼ˆå¦‚å®šä¹‰å¼æœ¬èº«ï¼‰ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_drop_redundant_divs(__isl_take isl_basic_map *bmap);` | ç§»é™¤é‚£äº›è¢«å…¶ä»–çº¦æŸéšå«æˆ–å†—ä½™çš„ `div` è¡¨è¾¾å¼ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_eliminate_pure_unit_divs(__isl_take isl_basic_map *bmap);` | ç§»é™¤å½¢å¼ä¸º `e = âŒŠc/dâŒ‹` çš„ `div`ï¼ˆå¸¸æ•°é™¤æ³•ï¼‰ï¼Œç›´æ¥æ›¿æ¢ä¸ºå¸¸é‡ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 6ï¼šå˜é‡ä¸ç»´åº¦æ¶ˆé™¤ï¼ˆVariable Eliminationï¼‰

> **å¤„ç†é€»è¾‘**ï¼šä»é›†åˆæˆ–æ˜ å°„ä¸­æ¶ˆé™¤æŸäº›å˜é‡ï¼Œå®ç°æŠ•å½±æˆ–é‡åŒ–ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_map *isl_basic_map_eliminate_vars(__isl_take isl_basic_map *bmap, unsigned pos, unsigned n);` | ä» `bmap` ä¸­æ¶ˆé™¤ä» `pos` å¼€å§‹çš„ `n` ä¸ªå˜é‡ï¼ˆé€šå¸¸æ˜¯å­˜åœ¨é‡è¯æ¶ˆé™¤ï¼‰ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_eliminate_vars(__isl_take isl_basic_set *bset, unsigned pos, unsigned n);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |
| `__isl_give isl_map *isl_map_eliminate(__isl_take isl_map *map, enum isl_dim_type type, unsigned first, unsigned n);` | æ¶ˆé™¤ `map` ä¸­ `type` ç±»å‹ä» `first` å¼€å§‹çš„ `n` ä¸ªå˜é‡ã€‚ |
| `__isl_give isl_set *isl_set_eliminate(__isl_take isl_set *set, enum isl_dim_type type, unsigned first, unsigned n);` | åŒä¸Šï¼Œç”¨äº `set`ã€‚ |
| `__isl_give isl_map *isl_map_project_onto(__isl_take isl_map *map, enum isl_dim_type type, unsigned first, unsigned n);` | å°† `map` æŠ•å½±åˆ°æŒ‡å®šç»´åº¦ä¸Šï¼ˆä¿ç•™è¿™äº›ç»´åº¦ï¼Œæ¶ˆé™¤å…¶ä»–ï¼‰ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 7ï¼šçº¦æŸåˆ é™¤ä¸ç»´åº¦åˆ é™¤

> **å¤„ç†é€»è¾‘**ï¼šåˆ é™¤æ¶‰åŠæŸäº›å˜é‡çš„çº¦æŸï¼Œæˆ–ç›´æ¥åˆ é™¤ç»´åº¦ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_map *isl_basic_map_drop_constraints_involving(__isl_take isl_basic_map *bmap, unsigned first, unsigned n);` | åˆ é™¤æ‰€æœ‰æ¶‰åŠä» `first` å¼€å§‹çš„ `n` ä¸ªå˜é‡çš„çº¦æŸã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_drop_constraints_involving(__isl_take isl_basic_set *bset, unsigned first, unsigned n);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_drop_constraints_involving_unknown_divs(__isl_take isl_basic_set *bset);` | åˆ é™¤æ‰€æœ‰æ¶‰åŠæœªçŸ¥ `div`ï¼ˆæœªå®šä¹‰æˆ–æœªå¯¹é½ï¼‰çš„çº¦æŸã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_drop_constraints_involving_unknown_divs(__isl_take isl_basic_map *bmap);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |
| `__isl_give isl_map *isl_map_drop_constraints_involving_unknown_divs(__isl_take isl_map *map);` | å¯¹æ•´ä¸ª `map` æ‰§è¡Œä¸Šè¿°æ“ä½œã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_drop_unrelated_constraints(__isl_take isl_basic_map *bmap, __isl_take int *group);` | åˆ é™¤ä¸æŒ‡å®šå˜é‡ç»„æ— å…³çš„çº¦æŸï¼ˆç”¨äºåˆ†è§£é—®é¢˜ï¼‰ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_drop(__isl_take isl_basic_set *bset, enum isl_dim_type type, unsigned first, unsigned n);` | åˆ é™¤ `bset` ä¸­ `type` ç±»å‹ä» `first` å¼€å§‹çš„ `n` ä¸ªç»´åº¦ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_drop(__isl_take isl_basic_map *bmap, enum isl_dim_type type, unsigned first, unsigned n);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |
| `__isl_give isl_set *isl_set_drop(__isl_take isl_set *set, enum isl_dim_type type, unsigned first, unsigned n);` | åŒä¸Šï¼Œç”¨äº `set`ã€‚ |
| `__isl_give isl_map *isl_map_drop(__isl_take isl_map *map, enum isl_dim_type type, unsigned first, unsigned n);` | åŒä¸Šï¼Œç”¨äº `map`ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_drop_dims(__isl_take isl_basic_set *bset, unsigned first, unsigned n);` | åˆ é™¤ `bset` ä¸­ä» `first` å¼€å§‹çš„ `n` ä¸ªç»´åº¦ï¼ˆä¸æŒ‡å®šç±»å‹ï¼Œé€šå¸¸æŒ‡å‚æ•°æˆ–å˜é‡ï¼‰ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 8ï¼šé›†åˆ/æ˜ å°„æ¸…ç†ä¸ç®€åŒ–

> **å¤„ç†é€»è¾‘**ï¼šç§»é™¤ç©ºé›†ã€é‡å¤éƒ¨åˆ†ï¼Œæˆ–å¯¹æ•´ä¸ªé›†åˆè¿›è¡Œå½’ä¸€åŒ–ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_map *isl_map_remove_empty_parts(__isl_take isl_map *map);` | ç§»é™¤ `map` ä¸­æ‰€æœ‰ä¸ºç©ºçš„ `basic_map`ã€‚ |
| `__isl_give isl_set *isl_set_remove_empty_parts(__isl_take isl_set *set);` | åŒä¸Šï¼Œç”¨äº `set`ã€‚ |
| `__isl_give isl_map *isl_map_remove_obvious_duplicates(__isl_take isl_map *map);` | ç§»é™¤ `map` ä¸­æ˜æ˜¾é‡å¤çš„ `basic_map`ï¼ˆç»“æ„å®Œå…¨ç›¸åŒï¼‰ã€‚ |
| `__isl_give isl_set *isl_set_normalize(__isl_take isl_set *set);` | å¯¹ `set` è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼šæ’åºã€å»é‡ã€å½’ä¸€åŒ–ç­‰ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 9ï¼šéšå¼ç­‰å¼ä¸çº¦æŸæ¨å¯¼

> **å¤„ç†é€»è¾‘**ï¼šä»ä¸ç­‰å¼ç³»ç»Ÿä¸­æ¨å¯¼å‡ºéšå«çš„ç­‰å¼ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_map *isl_basic_map_implicit_equalities(__isl_take isl_basic_map *bmap);` | åˆ†æ `bmap` çš„ä¸ç­‰å¼ç³»ç»Ÿï¼Œæ¨å¯¼å‡ºæ‰€æœ‰**éšå«çš„ç­‰å¼**ï¼ˆå¦‚ `x â‰¥ 5` ä¸” `x â‰¤ 5` â‡’ `x = 5`ï¼‰ï¼Œå¹¶å°†å…¶åŠ å…¥ç­‰å¼ç³»ç»Ÿã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 10ï¼šåº•å±‚é›†åˆè½¬æ¢ï¼ˆUnderlying Setï¼‰

> **å¤„ç†é€»è¾‘**ï¼šå°†æ˜ å°„ï¼ˆmapï¼‰è½¬æ¢ä¸ºå…¶åº•å±‚çš„é›†åˆè¡¨ç¤ºï¼ˆå¿½ç•¥è¾“å…¥/è¾“å‡ºè¯­ä¹‰ï¼‰ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_set *isl_basic_map_underlying_set(__isl_take isl_basic_map *bmap);` | å°† `bmap` è½¬æ¢ä¸ºä¸€ä¸ª `basic_set`ï¼Œå…¶ç©ºé—´åŒ…å«æ‰€æœ‰è¾“å…¥å’Œè¾“å‡ºå˜é‡ï¼ˆå³è§†ä¸ºè”åˆå˜é‡ç©ºé—´ï¼‰ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_underlying_set(__isl_take isl_basic_set *bset);` | è¿”å› `bset` è‡ªèº«ï¼ˆæ’ç­‰æ“ä½œï¼Œæ¥å£ç»Ÿä¸€ï¼‰ã€‚ |
| `__isl_give isl_basic_set_list *isl_basic_map_list_underlying_set(__isl_take isl_basic_map_list *list);` | å°† `list` ä¸­æ‰€æœ‰ `basic_map` è½¬æ¢ä¸º `basic_set`ã€‚ |
| `__isl_give isl_set *isl_map_underlying_set(__isl_take isl_map *map);` | å°†æ•´ä¸ª `map` è½¬æ¢ä¸º `set`ï¼ˆæ‰€æœ‰ `basic_map` â†’ `basic_set`ï¼‰ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_overlying_set(__isl_take isl_basic_set *bset, __isl_take isl_basic_map *like);` | å°† `bset` è½¬æ¢ä¸º `basic_map`ï¼Œå…¶ç»“æ„ï¼ˆå¦‚è¾“å…¥/è¾“å‡ºåˆ’åˆ†ï¼‰ä¸ `like` ç›¸åŒã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 11ï¼šå‰¯æœ¬ç®¡ç†ï¼ˆCopy-on-Write, COWï¼‰

> **å¤„ç†é€»è¾‘**ï¼šå®ç°å†™æ—¶å¤åˆ¶ï¼ˆCopy-on-Writeï¼‰ï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_set *isl_basic_set_cow(__isl_take isl_basic_set *bset);` | å¦‚æœ `bset` è¢«å¤šå¤„å¼•ç”¨ï¼Œè¿”å›å…¶å‰¯æœ¬ï¼›å¦åˆ™è¿”å›åŸå¯¹è±¡ã€‚ç”¨äºåœ¨ä¿®æ”¹å‰ç¡®ä¿ä¸ç ´åå…±äº«æ•°æ®ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_cow(__isl_take isl_basic_map *bmap);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |
| `__isl_give isl_set *isl_set_cow(__isl_take isl_set *set);` | åŒä¸Šï¼Œç”¨äº `set`ã€‚ |
| `__isl_give isl_map *isl_map_cow(__isl_take isl_map *map);` | åŒä¸Šï¼Œç”¨äº `map`ã€‚ |
| `isl_bool isl_basic_map_has_single_reference(__isl_keep isl_basic_map *bmap);` | æ£€æŸ¥ `bmap` æ˜¯å¦åªæœ‰ä¸€ä¸ªå¼•ç”¨ï¼ˆå¯ç”¨äºåˆ¤æ–­æ˜¯å¦å¯ä»¥ç›´æ¥ä¿®æ”¹ï¼‰ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 12ï¼šå“ˆå¸Œä¸å”¯ä¸€æ€§

> **å¤„ç†é€»è¾‘**ï¼šè®¡ç®—å“ˆå¸Œå€¼ï¼Œç”¨äºå¿«é€Ÿæ¯”è¾ƒæˆ–ç¼“å­˜ã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `uint32_t isl_basic_map_get_hash(__isl_keep isl_basic_map *bmap);` | è®¡ç®— `bmap` çš„å“ˆå¸Œå€¼ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾æˆ–å»é‡ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 13ï¼šç©ºé›†ä¸ç‰¹æ®ŠçŠ¶æ€

> **å¤„ç†é€»è¾‘**ï¼šå°†é›†åˆ/æ˜ å°„è®¾ç½®ä¸ºç©ºã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_basic_map *isl_basic_map_set_to_empty(__isl_take isl_basic_map *bmap);` | å°† `bmap` ç½®ä¸ºç©ºé›†ï¼ˆåˆ é™¤æ‰€æœ‰çº¦æŸï¼‰ã€‚ |
| `__isl_give isl_basic_set *isl_basic_set_set_to_empty(__isl_take isl_basic_set *bset);` | åŒä¸Šï¼Œç”¨äº `basic_set`ã€‚ |

---

## ğŸ”¹ åˆ†ç»„ 14ï¼šåˆ—è¡¨æ“ä½œä¸å¹¶é›†

> **å¤„ç†é€»è¾‘**ï¼šå¯¹ `basic_set_list` è¿›è¡Œæ“ä½œã€‚

| å‡½æ•° | è¯¦ç»†æ³¨é‡Š |
|------|----------|
| `__isl_give isl_set *isl_basic_set_list_union(__isl_take isl_basic_set_list *list);` | å°† `list` ä¸­æ‰€æœ‰ `basic_set` å–å¹¶é›†ï¼Œæ„é€ ä¸€ä¸ª `isl_set`ã€‚ |

---

## âœ… æ€»ç»“ï¼šè¿™äº›å‡½æ•°çš„ç”¨é€”

è¿™äº›å‡½æ•°æ„æˆäº† ISL çš„ **é«˜çº§ä¼˜åŒ–ä¸ä»£æ•°æ“ä½œå¼•æ“**ï¼Œç”¨äºï¼š

- **å˜é‡æ¶ˆé™¤**ï¼ˆé‡åŒ–ï¼‰
- **çº¦æŸç®€åŒ–**ï¼ˆé«˜æ–¯æ¶ˆå…ƒã€å½’ä¸€åŒ–ï¼‰
- **`div` ç®¡ç†**ï¼ˆå¯¹é½ã€ä¼˜åŒ–ã€æ¶ˆé™¤ï¼‰
- **é›†åˆæ¸…ç†**ï¼ˆå»ç©ºã€å»é‡ï¼‰
- **ç»“æ„è½¬æ¢**ï¼ˆmap â†” setï¼‰
- **æ€§èƒ½ä¼˜åŒ–**ï¼ˆCOWã€å“ˆå¸Œï¼‰

å®ƒä»¬æ˜¯ ISL å®ç° **å¤šé¢ä½“æ¨¡å‹ä¼˜åŒ–ã€å¾ªç¯å˜æ¢ã€ä¾èµ–åˆ†æ** çš„æ ¸å¿ƒæ”¯æ’‘ã€‚

å¦‚æœä½ éœ€è¦ï¼Œæˆ‘å¯ä»¥æä¾›ä¸€ä¸ª **â€œå¦‚ä½•ä½¿ç”¨è¿™äº›å‡½æ•°è¿›è¡Œå˜é‡æ¶ˆé™¤â€ çš„å®Œæ•´æµç¨‹ç¤ºä¾‹**ï¼Œæˆ–è€… **`div` å¯¹é½çš„å®é™…åº”ç”¨åœºæ™¯**ã€‚æ˜¯å¦éœ€è¦ï¼Ÿ
éå¸¸å¥½ï¼ä½ æä¾›çš„æ˜¯ ISLï¼ˆInteger Set Libraryï¼‰ä¸­ä¸€ç»„éå¸¸åº•å±‚ã€å¼ºå¤§ä¸”å…³é”®çš„æ¥å£ï¼Œæ¶‰åŠ**å¤šé¢ä½“å‡ ä½•æ€§è´¨åˆ†æã€å˜é‡å˜æ¢ã€æœ‰ç†æ•°æ”¯æŒã€é™¤æ³•å¤„ç†ã€ä¸Šä¸‹æ–‡ç®€åŒ–ã€å‚æ•°å¯¹é½**ç­‰é«˜çº§æ“ä½œã€‚

æˆ‘ä»¬å°†è¿™äº›æ¥å£**æŒ‰åŠŸèƒ½é€»è¾‘åˆ†ç»„**ï¼Œæ¯ç»„è¯´æ˜å…¶**å¤„ç†é€»è¾‘ã€ç”¨é€”ã€è¯¦ç»†æ³¨é‡Š**ï¼Œå¹¶æœ€åç»™å‡ºä¸€ä¸ª**ç»¼åˆç¤ºä¾‹**ï¼Œå±•ç¤ºå¦‚ä½•ç»„åˆä½¿ç”¨è¿™äº›åŠŸèƒ½è¿›è¡Œé«˜çº§å¤šé¢ä½“å˜æ¢ä¸åˆ†æã€‚

---

## âœ… åˆ†ç»„ä¸€ï¼š**å¤šé¢ä½“çš„å‡ ä½•æ€§è´¨æå–ï¼ˆRecession Cone & Lineality Spaceï¼‰**

> ç”¨äºåˆ†æé›†åˆçš„â€œæ— é™æ–¹å‘â€å’Œâ€œå¯¹ç§°æ–¹å‘â€ã€‚

```c
__isl_give isl_basic_set *isl_basic_set_recession_cone(
	__isl_take isl_basic_set *bset);
// è¿”å› bset çš„ recession coneï¼ˆåé€€é”¥ï¼‰ï¼šæ‰€æœ‰ä½¿å¾—ä»é›†åˆä¸­ä»»ä¸€ç‚¹å‡ºå‘æ²¿è¯¥æ–¹å‘æ— é™å»¶ä¼¸ä»ç•™åœ¨é›†åˆä¸­çš„æ–¹å‘ã€‚
// ä¾‹å¦‚ï¼š{ [i] : i >= 0 } çš„ recession cone æ˜¯ { [d] : d >= 0 }
// ç”¨é€”ï¼šå¾ªç¯è¾¹ç•Œåˆ†æã€æ— ç•Œæ€§æ£€æµ‹

__isl_give isl_basic_set *isl_basic_set_lineality_space(
	__isl_take isl_basic_set *bset);
// è¿”å› bset çš„ lineality spaceï¼ˆçº¿æ€§ç©ºé—´ï¼‰ï¼šæ—¢æ˜¯ recession cone åˆæ˜¯å…¶è´Ÿæ–¹å‘ä¹Ÿåœ¨é›†åˆä¸­çš„æ–¹å‘é›†åˆã€‚
// å³ï¼šd å’Œ -d éƒ½æ˜¯ recession direction â†’ d åœ¨ lineality space ä¸­
// ä¾‹å¦‚ï¼š{ [i] : i free } çš„ lineality space æ˜¯ { [d] : d free }
// ç”¨é€”ï¼šè¯†åˆ«å¯¹ç§°è‡ªç”±åº¦ã€ç®€åŒ–ä¾èµ–åˆ†æ

__isl_give isl_set *isl_set_combined_lineality_space(
	__isl_take isl_set *set);
// å¯¹ isl_setï¼ˆå¤šä¸ªåŸºæœ¬é›†çš„å¹¶ï¼‰è®¡ç®—æ‰€æœ‰åŸºæœ¬é›† lineality space çš„äº¤é›†
// ç”¨äºå¤šåˆ†æ”¯æ§åˆ¶æµä¸‹çš„ç»Ÿä¸€è‡ªç”±æ–¹å‘åˆ†æ
```

> ğŸ“Œ **å¤„ç†é€»è¾‘**ï¼šåˆ†æé›†åˆçš„â€œæ— é™å¯æ‰©å±•æ–¹å‘â€ï¼Œç”¨äºåˆ¤æ–­ç¨‹åºå¾ªç¯æ˜¯å¦æ— ç•Œã€æ˜¯å¦å­˜åœ¨å¯¹ç§°æ€§ã€æ˜¯å¦å¯å¹¶è¡ŒåŒ–ã€‚

---

## âœ… åˆ†ç»„äºŒï¼š**æœ‰ç†æ•°ï¼ˆRationalï¼‰ vs æ•´æ•°ï¼ˆIntegralï¼‰è¯­ä¹‰æ§åˆ¶**

> ISL é»˜è®¤å¤„ç†æ•´æ•°æ ¼ç‚¹ï¼Œä½†æŸäº›åœºæ™¯ï¼ˆå¦‚è°ƒåº¦ã€æ¾å¼›ä¼˜åŒ–ï¼‰éœ€è¦æ”¯æŒæœ‰ç†æ•°ã€‚

```c
__isl_give isl_basic_set *isl_basic_set_set_integral(
	__isl_take isl_basic_set *bset);
// å¼ºåˆ¶ bset ä¸ºæ•´æ•°è¯­ä¹‰ï¼ˆé»˜è®¤ï¼‰ï¼Œå³æ‰€æœ‰ç‚¹å¿…é¡»æ˜¯æ•´æ•°æ ¼ç‚¹

__isl_give isl_basic_set *isl_basic_set_set_rational(
	__isl_take isl_basic_set *bset);
__isl_give isl_set *isl_set_set_rational(__isl_take isl_set *set);
__isl_give isl_basic_map *isl_basic_map_set_rational(
	__isl_take isl_basic_map *bmap);
__isl_give isl_map *isl_map_set_rational(__isl_take isl_map *map);
// å°†é›†åˆ/æ˜ å°„æ ‡è®°ä¸ºâ€œæœ‰ç†æ•°è¯­ä¹‰â€â€”â€”å…è®¸ç‚¹åæ ‡ä¸ºæœ‰ç†æ•°
// ç”¨é€”ï¼šè°ƒåº¦å™¨ä¸­å…è®¸éæ•´æ•°æ—¶é—´æˆ³ã€æ¾å¼›ä¼˜åŒ–

isl_bool isl_map_is_rational(__isl_keep isl_map *map);
isl_bool isl_set_is_rational(__isl_keep isl_set *set);
// æŸ¥è¯¢æ˜¯å¦ä¸ºæœ‰ç†æ•°è¯­ä¹‰

isl_bool isl_map_has_rational(__isl_keep isl_map *map);
isl_bool isl_set_has_rational(__isl_keep isl_set *set);
// æŸ¥è¯¢æ˜¯å¦â€œåŒ…å«â€æœ‰ç†æ•°è¯­ä¹‰çš„åŸºæœ¬å—ï¼ˆç”¨äº union_map/setï¼‰
```

> ğŸ“Œ **å¤„ç†é€»è¾‘**ï¼šæ§åˆ¶ ISL å¯¹â€œç‚¹â€çš„è§£é‡Šæ˜¯æ•´æ•°æ ¼ç‚¹è¿˜æ˜¯å®æ•°/æœ‰ç†æ•°ç‚¹ï¼Œå½±å“åç»­çš„äº¤ã€å¹¶ã€æŠ•å½±ç­‰æ“ä½œè¯­ä¹‰ã€‚

---

## âœ… åˆ†ç»„ä¸‰ï¼š**ä»¿å°„å‡½æ•°è½¬æ˜ å°„ï¼ˆAffine to Mapï¼‰**

> å°†ä»¿å°„è¡¨è¾¾å¼ï¼ˆå¦‚ `i+1`ï¼‰è½¬æ¢ä¸ºæ˜ å°„å…³ç³»ï¼ˆå¦‚ `[i] -> [i+1]`ï¼‰ã€‚

```c
__isl_give isl_basic_map *isl_basic_map_from_multi_aff2(
	__isl_take isl_multi_aff *maff, int rational);
// å°† multi_aff è½¬ä¸º basic_mapï¼Œrational è¡¨ç¤ºæ˜¯å¦å¯ç”¨æœ‰ç†æ•°è¯­ä¹‰
// ä¾‹å¦‚ï¼šmaff = [i+1] â†’ basic_map = { [i] -> [i+1] }

__isl_give isl_map *isl_map_from_multi_aff_internal(
	__isl_take isl_multi_aff *ma);
// å¤šè¾“å‡ºä»¿å°„å‡½æ•°è½¬ä¸º mapï¼ˆå†…éƒ¨å‡½æ•°ï¼Œæ…ç”¨ï¼‰

__isl_give isl_map *isl_map_from_pw_aff_internal(__isl_take isl_pw_aff *pa);
// åˆ†æ®µä»¿å°„å‡½æ•°è½¬ä¸º mapï¼ˆå¦‚ { [i] -> [2*i] if i<5 }ï¼‰

__isl_give isl_map *isl_map_from_pw_multi_aff_internal(
	__isl_take isl_pw_multi_aff *pma);
// åˆ†æ®µå¤šè¾“å‡ºä»¿å°„å‡½æ•°è½¬ä¸º map
```

> ğŸ“Œ **å¤„ç†é€»è¾‘**ï¼šå°†ç¨‹åºä¸­çš„â€œè¡¨è¾¾å¼â€æå‡ä¸ºâ€œå…³ç³»â€ï¼Œç”¨äºæ„å»ºä¾èµ–å›¾ã€è°ƒåº¦å…³ç³»ã€æ•°æ®æµã€‚

---

## âœ… åˆ†ç»„å››ï¼š**çº¿æ€§å˜æ¢ï¼ˆPreimage & Transform Dimsï¼‰**

> ä½¿ç”¨çŸ©é˜µå¯¹å˜é‡ç©ºé—´è¿›è¡Œçº¿æ€§å˜æ¢ã€‚

```c
__isl_give isl_basic_set *isl_basic_set_preimage(
	__isl_take isl_basic_set *bset, __isl_take isl_mat *mat);
__isl_give isl_set *isl_set_preimage(
	__isl_take isl_set *set, __isl_take isl_mat *mat);
// å¯¹ bset/set åº”ç”¨ mat çš„é€†å˜æ¢ï¼ˆpreimageï¼‰ï¼šx âˆˆ bset iff matâ»Â¹Â·x âˆˆ åŸé›†åˆ
// ç”¨äºåæ ‡å˜æ¢ã€å¾ªç¯é‡æ˜ å°„

__isl_give isl_basic_map *isl_basic_map_transform_dims(
	__isl_take isl_basic_map *bmap, enum isl_dim_type type, unsigned first,
	__isl_take isl_mat *trans);
__isl_give isl_basic_set *isl_basic_set_transform_dims(
	__isl_take isl_basic_set *bset, enum isl_dim_type type, unsigned first,
	__isl_take isl_mat *trans);
// å¯¹ bset/bmap çš„æŒ‡å®šç»´åº¦ï¼ˆtype ç±»å‹ï¼Œä» first å¼€å§‹ï¼‰åº”ç”¨çº¿æ€§å˜æ¢ trans
// ä¾‹å¦‚ï¼šå°† [i,j] å˜ä¸º [i+j, i-j]
```

> ğŸ“Œ **å¤„ç†é€»è¾‘**ï¼šå®ç°å¾ªç¯ç©ºé—´çš„ä»¿å°„å˜æ¢ï¼ˆå¦‚ skewingã€tilingã€fusion æ‰€éœ€çš„åæ ‡å˜æ¢ï¼‰ã€‚

---

## âœ… åˆ†ç»„äº”ï¼š**é™¤æ³•ï¼ˆDivï¼‰å¤„ç†ä¸å±•å¼€**

> ISL æ”¯æŒæ¨¡è¿ç®—å’Œæ•´é™¤ï¼ˆå¦‚ `e0 = floor((i+j)/2)`ï¼‰ï¼Œè¿™äº›â€œå±€éƒ¨å˜é‡â€ç§°ä¸º `div`ã€‚

```c
__isl_give isl_basic_set *isl_basic_set_expand_divs(
	__isl_take isl_basic_set *bset, __isl_take isl_mat *div, int *exp);
// å°† bset ä¸­çš„ div å˜é‡ç”¨æ˜¾å¼è¡¨è¾¾å¼å±•å¼€ï¼ˆexp æ•°ç»„æ§åˆ¶æ˜¯å¦å±•å¼€ï¼‰
// ç”¨äºæ¶ˆé™¤éšå¼å˜é‡ï¼Œä¾¿äºåˆ†æ

__isl_give isl_basic_map *isl_basic_map_expand_divs(
	__isl_take isl_basic_set *bmap, __isl_take isl_mat *div, int *exp);
// åŒä¸Šï¼Œç”¨äºæ˜ å°„

__isl_give isl_mat *isl_basic_set_get_divs(__isl_keep isl_basic_set *bset);
__isl_give isl_mat *isl_basic_map_get_divs(__isl_keep isl_basic_map *bmap);
// è·å– bset/bmap ä¸­æ‰€æœ‰ div çš„å®šä¹‰çŸ©é˜µï¼ˆæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ª div çš„ affine è¡¨è¾¾å¼ï¼‰

isl_bool isl_basic_map_divs_known(__isl_keep isl_basic_map *bmap);
isl_bool isl_map_divs_known(__isl_keep isl_map *map);
// æ£€æŸ¥æ‰€æœ‰ div æ˜¯å¦éƒ½å·²çŸ¥ï¼ˆæœªæ ‡è®°ä¸º unknownï¼‰

isl_bool isl_basic_map_div_is_known(__isl_keep isl_basic_map *bmap, int div);
isl_bool isl_basic_map_div_is_marked_unknown(__isl_keep isl_basic_map *bmap, int div);
// æŸ¥è¯¢ç‰¹å®š div æ˜¯å¦å·²çŸ¥æˆ–æ ‡è®°ä¸º unknown

__isl_give isl_basic_map *isl_basic_map_mark_div_unknown(
	__isl_take isl_basic_map *bmap, int div);
// å°†ç¬¬ div ä¸ª div æ ‡è®°ä¸º unknownï¼ˆç”¨äºå»¶è¿Ÿæ±‚è§£ï¼‰
```

> ğŸ“Œ **å¤„ç†é€»è¾‘**ï¼šå¤„ç†ç¨‹åºä¸­çš„ `floor`ã€`mod` ç­‰éçº¿æ€§æ“ä½œå¼•å…¥çš„éšå¼å˜é‡ï¼Œå†³å®šæ˜¯å¦å±•å¼€æˆ–ä¿ç•™ã€‚

---

## âœ… åˆ†ç»„å…­ï¼š**ç‚¹ä¸é›†åˆçš„æˆå‘˜å…³ç³» & éå†**

```c
isl_bool isl_basic_map_contains_point(__isl_keep isl_basic_map *bmap,
	__isl_keep isl_point *point);
isl_bool isl_set_contains_point(__isl_keep isl_set *set,
	__isl_keep isl_point *point);
// æ£€æŸ¥æŸç‚¹æ˜¯å¦åœ¨é›†åˆ/æ˜ å°„ä¸­

isl_stat isl_set_foreach_orthant(__isl_keep isl_set *set,
	isl_stat (*fn)(__isl_take isl_set *orthant, int *signs, void *user),
	void *user);
// éå† set çš„æ¯ä¸ªâ€œè±¡é™â€ï¼ˆorthantï¼‰ï¼Œå³æ¯ä¸ªå˜é‡æ­£è´Ÿç»„åˆçš„å­ç©ºé—´
// signs æ•°ç»„è¡¨ç¤ºå„å˜é‡ç¬¦å·ï¼ˆ+1, -1, 0ï¼‰

isl_stat isl_basic_set_vars_get_sign(__isl_keep isl_basic_set *bset,
	unsigned first, unsigned n, int *signs);
// è·å– bset ä¸­ä» first å¼€å§‹çš„ n ä¸ªå˜é‡çš„ç¬¦å·çº¦æŸï¼ˆ+1: â‰¥0, -1: â‰¤0, 0: è‡ªç”±ï¼‰
```

> ğŸ“Œ **å¤„ç†é€»è¾‘**ï¼šç”¨äºè°ƒè¯•ã€éªŒè¯ã€ç¬¦å·åˆ†æã€è±¡é™åˆ†è§£ã€‚

---

## âœ… åˆ†ç»„ä¸ƒï¼š**ç­‰å¼/ä¸ç­‰å¼æ•°é‡æŸ¥è¯¢**

```c
isl_size isl_basic_set_n_equality(__isl_keep isl_basic_set *bset);
isl_size isl_basic_map_n_equality(__isl_keep isl_basic_map *bmap);
isl_size isl_basic_set_n_inequality(__isl_keep isl_basic_set *bset);
isl_size isl_basic_map_n_inequality(__isl_keep isl_basic_map *bmap);
// è¿”å›åŸºæœ¬é›†/æ˜ å°„ä¸­ç­‰å¼å’Œä¸ç­‰å¼çš„æ•°é‡
// ç”¨äºå¤æ‚åº¦ä¼°è®¡ã€ç®€åŒ–åˆ¤æ–­
```

> ğŸ“Œ **å¤„ç†é€»è¾‘**ï¼šè·å–å¤šé¢ä½“çš„çº¦æŸæ•°é‡ï¼Œç”¨äºæ€§èƒ½åˆ†ææˆ–ç®€åŒ–ç­–ç•¥ã€‚

---

## âœ… åˆ†ç»„å…«ï¼š**å‚æ•°å¯¹é½ï¼ˆParameter Alignmentï¼‰**

> å¤šä¸ªé›†åˆ/æ˜ å°„å¿…é¡»æœ‰ç›¸åŒå‚æ•°é¡ºåºæ‰èƒ½è¿›è¡Œäº¤ã€å¹¶ç­‰æ“ä½œã€‚

```c
isl_stat isl_map_align_params_bin(__isl_keep isl_map **map1,
	__isl_keep isl_map **map2);
// å¯¹é½ map1 å’Œ map2 çš„å‚æ•°é¡ºåºï¼ˆä¿®æ”¹æŒ‡é’ˆæŒ‡å‘æ–°å¯¹é½å¯¹è±¡ï¼‰
// è‹¥å¤±è´¥è¿”å› -1

isl_stat isl_map_align_params_set(__isl_keep isl_map **map,
	__isl_keep isl_set **set);
// å¯¹é½ map å’Œ set çš„å‚æ•°

isl_bool isl_map_align_params_map_map_and_test(__isl_keep isl_map *map1,
	__isl_keep isl_map *map2,
	isl_bool (*fn)(__isl_keep isl_map *map1, __isl_keep isl_map *map2));
// å¯¹é½åç«‹å³æ‰§è¡Œ fn å‡½æ•°ï¼ˆé¿å…é‡å¤å¯¹é½ï¼‰
```

> ğŸ“Œ **å¤„ç†é€»è¾‘**ï¼šç¡®ä¿å¤šä¸ªå¯¹è±¡åœ¨ç›¸åŒå‚æ•°ç©ºé—´ä¸‹æ“ä½œï¼Œæ˜¯ç»„åˆåˆ†æçš„å‰æã€‚

---

## âœ… åˆ†ç»„ä¹ï¼š**ä¸Šä¸‹æ–‡ç®€åŒ–ï¼ˆGistï¼‰ä¸æ›¿æ¢ï¼ˆSubstituteï¼‰**

```c
__isl_give isl_set *isl_set_gist_params_basic_set(__isl_take isl_set *set,
	__isl_take isl_basic_set *context);
// åœ¨ context å‚æ•°çº¦æŸä¸‹ç®€åŒ– set çš„è¡¨è¾¾
// ä¾‹å¦‚ï¼šset = { [i] : i > N }, context = { N >= 10 } â†’ å¯èƒ½ç®€åŒ–ä¸º { [i] : i > 10 }

__isl_give isl_set *isl_set_substitute(__isl_take isl_set *set,
	enum isl_dim_type type, unsigned pos, __isl_keep isl_aff *subs);
// å°† set ä¸­ type ç±»å‹çš„ç¬¬ pos ä¸ªå˜é‡æ›¿æ¢ä¸ºä»¿å°„è¡¨è¾¾å¼ subs
// ä¾‹å¦‚ï¼šå°† i æ›¿æ¢ä¸º j+k
```

> ğŸ“Œ **å¤„ç†é€»è¾‘**ï¼šåˆ©ç”¨å·²çŸ¥ä¸Šä¸‹æ–‡ç®€åŒ–é›†åˆè¡¨è¾¾å¼ï¼Œæˆ–è¿›è¡Œå˜é‡æ¶ˆå»ã€‚

---

## âœ… ç»¼åˆç¤ºä¾‹ï¼šåˆ†æä¸€ä¸ªå¸¦ floor çš„å¾ªç¯ä¾èµ–ï¼Œå¹¶è¿›è¡Œåæ ‡å˜æ¢

```c
#include <isl/set.h>
#include <isl/map.h>
#include <isl/mat.h>
#include <isl/constraint.h>

int main() {
    isl_ctx *ctx = isl_ctx_alloc();

    // 1. å®šä¹‰å¾ªç¯åŸŸï¼š{ [i] : 0 <= i < 2*N }
    isl_set *domain = isl_set_from_str(ctx, "{ [i] : 0 <= i < 2*N }");

    // 2. å®šä¹‰ä¾èµ–ï¼šj = floor(i/2)ï¼Œå³ { [i] -> [j] : j = floor(i/2) }
    isl_map *dep = isl_map_from_str(ctx, "{ [i] -> [floor(i/2)] }");

    // 3. å¯¹é½å‚æ•°ï¼ˆç¡®ä¿ domain å’Œ dep å‚æ•°ä¸€è‡´ï¼‰
    isl_set_align_params(&domain, &dep);

    // 4. æ£€æŸ¥ dep æ˜¯å¦æœ‰æœªçŸ¥ div
    if (!isl_map_divs_known(dep)) {
        printf("Dependency has unknown divs.\n");
    }

    // 5. è·å–å¹¶å±•å¼€ divï¼ˆæ˜¾å¼åŒ– floorï¼‰
    isl_basic_map *bdep = isl_basic_map_from_map(isl_map_copy(dep));
    isl_mat *divs = isl_basic_map_get_divs(bdep);
    int *exp = (int*)calloc(isl_mat_rows(divs), sizeof(int));
    exp[0] = 1; // å±•å¼€ç¬¬ä¸€ä¸ª div
    isl_basic_map *expanded = isl_basic_map_expand_divs(bdep, divs, exp);
    isl_map *dep_expanded = isl_map_from_basic_map(expanded);
    free(exp);

    // 6. åæ ‡å˜æ¢ï¼šä»¤ k = i - jï¼Œä½¿ç”¨ preimage
    // æ„é€ å˜æ¢çŸ©é˜µï¼š[i, j] -> [k=i-j, j]
    isl_mat *trans = isl_mat_alloc(ctx, 2, 2);
    isl_int_set_si(isl_mat_entry(trans, 0, 0), 1);  // k = 1*i + (-1)*j
    isl_int_set_si(isl_mat_entry(trans, 0, 1), -1);
    isl_int_set_si(isl_mat_entry(trans, 1, 0), 0);
    isl_int_set_si(isl_mat_entry(trans, 1, 1), 1);  // j = 0*i + 1*j
    isl_basic_map *transformed = isl_basic_map_transform_dims(
        isl_basic_map_from_map(dep_expanded),
        isl_dim_out, 0, trans);
    isl_map *result = isl_map_from_basic_map(transformed);

    // 7. åˆ©ç”¨ä¸Šä¸‹æ–‡ N >= 10 ç®€åŒ–
    isl_basic_set *context = isl_basic_set_from_str(ctx, "[N] -> { : N >= 10 }");
    isl_set *simple_domain = isl_set_gist_params_basic_set(domain, context);

    // 8. æ‰“å°ç»“æœ
    printf("Original domain: ");
    isl_set_dump(simple_domain);
    printf("Transformed dependency: ");
    isl_map_dump(result);

    // 9. æ¸…ç†
    isl_set_free(simple_domain);
    isl_map_free(result);
    isl_basic_set_free(context);
    isl_ctx_free(ctx);

    return 0;
}
```

---

## âœ… æ€»ç»“

| åˆ†ç»„ | æ ¸å¿ƒåŠŸèƒ½ | å…¸å‹ç”¨é€” |
|------|---------|----------|
| å‡ ä½•æ€§è´¨ | recession/lineality | æ— ç•Œæ€§ã€å¯¹ç§°æ€§åˆ†æ |
| æœ‰ç†æ•°æ§åˆ¶ | set_rational | è°ƒåº¦ã€æ¾å¼›ä¼˜åŒ– |
| Affine â†’ Map | from_multi_aff | æ„å»ºä¾èµ–/è°ƒåº¦å…³ç³» |
| çº¿æ€§å˜æ¢ | preimage/transform_dims | å¾ªç¯å˜æ¢ï¼ˆtiling, skewingï¼‰ |
| Div å¤„ç† | expand_divs/get_divs | å¤„ç† floor/mod |
| æˆå‘˜æŸ¥è¯¢ | contains_point | è°ƒè¯•ã€éªŒè¯ |
| å‚æ•°å¯¹é½ | align_params | å¤šå¯¹è±¡ç»„åˆæ“ä½œå‰æ |
| ä¸Šä¸‹æ–‡ç®€åŒ– | gist/substitute | è¡¨è¾¾å¼åŒ–ç®€ã€å˜é‡æ›¿æ¢ |

è¿™äº›æ¥å£æ˜¯ ISL å®ç°**é«˜çº§å¾ªç¯ä¼˜åŒ–**ï¼ˆå¦‚ Plutoã€Tiramisuï¼‰çš„æ ¸å¿ƒå·¥å…·ã€‚æŒæ¡å®ƒä»¬ï¼Œä½ å°±èƒ½æ·±å…¥å¤šé¢ä½“ç¼–è¯‘å™¨çš„åº•å±‚é€»è¾‘ã€‚

æ˜¯å¦éœ€è¦æˆ‘æä¾›ä¸€ä¸ª **â€œå¦‚ä½•ç”¨è¿™äº›æ¥å£å®ç°å¾ªç¯èåˆï¼ˆloop fusionï¼‰çš„ä¾èµ–æ£€æŸ¥â€** çš„å®æˆ˜æ¡ˆä¾‹ï¼Ÿ

éå¸¸å¥½ï¼ä½ æä¾›çš„æ˜¯ä¸€ç»„æ¥è‡ª **ISL (Integer Set Library)** çš„åº•å±‚æ¥å£ï¼Œå®ƒä»¬ç”¨äºå¤„ç†æ•´æ•°é›†ï¼ˆ`isl_set`ï¼‰ã€æ˜ å°„ï¼ˆ`isl_map`ï¼‰å’ŒåŸºæœ¬å¤šé¢ä½“ï¼ˆ`isl_basic_*`ï¼‰çš„**å±æ€§æŸ¥è¯¢ã€ç©ºé—´å˜æ¢ã€ç®€åŒ–ã€è®¡æ•°ã€ç­‰ä»·æ€§æ£€æŸ¥**ç­‰æ“ä½œã€‚

æˆ‘ä»¬å°†è¿™äº›æ¥å£**æŒ‰é€»è¾‘åŠŸèƒ½åˆ†ç»„**ï¼Œæ¯ç»„å®ç°ä¸€ä¸ª**ç‰¹å®šçš„å¤„ç†é€»è¾‘**ï¼Œå¹¶ä¸ºæ¯ä¸ªæ¥å£æ·»åŠ è¯¦ç»†æ³¨é‡Šã€‚æœ€åï¼Œç”¨ä¸€ä¸ª**ç»¼åˆä¾‹å­**å±•ç¤ºå¦‚ä½•ç»„åˆä½¿ç”¨è¿™äº›æ¥å£è¿›è¡Œ**å¾ªç¯èåˆå‰çš„ä¾èµ–åˆ†æä¸ç®€åŒ–**ã€‚

---

## ğŸ“š åˆ†ç»„è¯´æ˜

æˆ‘ä»¬å°†æ¥å£åˆ†ä¸ºä»¥ä¸‹ **8 å¤§ç±»**ï¼Œæ¯ç±»å¯¹åº”ä¸€ç§å¤„ç†é€»è¾‘ï¼š

---

### ğŸ”¹ åˆ†ç»„ 1ï¼š**ç©ºé—´ä¸ç»“æ„ä¸€è‡´æ€§æ£€æŸ¥**  
> æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦åœ¨ç›¸åŒçš„ç©ºé—´ã€ç»´åº¦ã€å…ƒç»„ç»“æ„ä¸‹å®šä¹‰ã€‚

| æ¥å£ | è¯´æ˜ |
|------|------|
| `isl_bool isl_map_space_tuple_is_equal(__isl_keep isl_map *map, enum isl_dim_type type1, __isl_keep isl_space *space, enum isl_dim_type type2);` | æ£€æŸ¥ `map` çš„ `type1` ç»´åº¦å…ƒç»„æ˜¯å¦ä¸ `space` çš„ `type2` ç»´åº¦å…ƒç»„åœ¨ç©ºé—´ä¸Šä¸€è‡´ï¼ˆåç§°ã€æ•°é‡ç­‰ï¼‰ã€‚ |
| `isl_bool isl_map_tuple_is_equal(__isl_keep isl_map *map1, enum isl_dim_type type1, __isl_keep isl_map *map2, enum isl_dim_type type2);` | æ£€æŸ¥ä¸¤ä¸ªæ˜ å°„çš„æŒ‡å®šç»´åº¦å…ƒç»„æ˜¯å¦å®Œå…¨ç›¸åŒï¼ˆç±»å‹ã€æ•°é‡ã€é¡ºåºï¼‰ã€‚ |
| `isl_bool isl_map_has_space(__isl_keep isl_map *map, __isl_keep isl_space *space);` | æ£€æŸ¥ `map` æ˜¯å¦å®šä¹‰åœ¨ç»™å®š `space` ä¸Šã€‚ |
| `isl_bool isl_map_has_space_tuples(__isl_keep isl_map *map, __isl_keep isl_space *space);` | æ£€æŸ¥ `map` æ˜¯å¦å…·æœ‰ä¸ `space` ç›¸åŒçš„è¾“å…¥/è¾“å‡ºå…ƒç»„ç»“æ„ã€‚ |

> âœ… **ç”¨é€”**ï¼šåœ¨åˆå¹¶æˆ–æ¯”è¾ƒä¸¤ä¸ªä¾èµ–å…³ç³»å‰ï¼Œç¡®ä¿å®ƒä»¬â€œå¯æ¯”â€ã€‚

---

### ğŸ”¹ åˆ†ç»„ 2ï¼š**ç»´åº¦å›ºå®šä¸å‚æ•°åŒ–æ±‚è§£**  
> å°†æŸä¸ªç»´åº¦ï¼ˆå¦‚å¾ªç¯å˜é‡ï¼‰å›ºå®šä¸ºå…·ä½“å€¼ï¼Œæˆ–å°†ä¸ç­‰å¼çº¦æŸä¸­çš„é™¤æ³•ï¼ˆdivï¼‰è¡¨è¾¾å¼è¿›è¡Œæ“ä½œã€‚

| æ¥å£ | è¯´æ˜ |
|------|------|
| `__isl_give isl_basic_set *isl_basic_set_fix(__isl_take isl_basic_set *bset, enum isl_dim_type type, unsigned pos, isl_int value);` | å°† `bset` çš„ç¬¬ `pos` ä¸ª `type` ç±»å‹ç»´åº¦ï¼ˆå¦‚ `isl_dim_set`ï¼‰å›ºå®šä¸º `value`ï¼Œè¿”å›æ–°é›†åˆã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_fix(...);` | åŒä¸Šï¼Œç”¨äº `basic_map`ã€‚ |
| `__isl_give isl_set *isl_set_fix(...);` | åŒä¸Šï¼Œç”¨äº `set`ï¼ˆå¯èƒ½åŒ…å«å¤šä¸ª `basic_set`ï¼‰ã€‚ |
| `isl_bool isl_map_plain_is_fixed(__isl_keep isl_map *map, enum isl_dim_type type, unsigned pos, isl_int *val);` | æ£€æŸ¥ `map` ä¸­ `type` ç±»å‹ç¬¬ `pos` ç»´æ˜¯å¦è¢«å›ºå®šä¸ºæŸä¸ªå€¼ï¼Œè‹¥å›ºå®šåˆ™è¾“å‡º `val`ã€‚ |

> âœ… **ç”¨é€”**ï¼šåˆ†æç‰¹å®šè¿­ä»£æ­¥çš„ä¾èµ–ï¼Œå¦‚ `i=5` æ—¶æ˜¯å¦å­˜åœ¨ä¾èµ–ã€‚

---

### ğŸ”¹ åˆ†ç»„ 3ï¼š**æ¨¡è¿ç®—ä¸å‘¨æœŸæ€§åˆ†æ**  
> åˆ†ææŸä¸ªç»´åº¦åœ¨é›†åˆä¸­æ˜¯å¦å…·æœ‰å‘¨æœŸæ€§è¡Œä¸ºï¼ˆå¦‚æ­¥é•¿ä¸º 2 çš„å¾ªç¯ï¼‰ã€‚

| æ¥å£ | è¯´æ˜ |
|------|------|
| `isl_stat isl_basic_set_dim_residue_class(__isl_keep isl_basic_set *bset, int pos, isl_int *modulo, isl_int *residue);` | æ±‚ `bset` ä¸­ç¬¬ `pos` ç»´çš„**åŒä½™ç±»**ï¼šå³ `x â‰¡ r (mod m)`ã€‚ |
| `isl_stat isl_set_dim_residue_class(...);` | åŒä¸Šï¼Œç”¨äº `isl_set`ï¼ˆè”åˆå¤šä¸ª `basic_set`ï¼‰ã€‚ |

> âœ… **ç”¨é€”**ï¼šåˆ¤æ–­å¾ªç¯æ˜¯å¦æ­¥è¿›ä¸º `i+=2`ï¼Œæˆ–æ•°ç»„è®¿é—®æ˜¯å¦ä¸ºå¶æ•°ç´¢å¼•ã€‚

---

### ğŸ”¹ åˆ†ç»„ 4ï¼š**ç®€åŒ–ä¸æç‚¼ï¼ˆGistï¼‰**  
> ä»ä¸€ä¸ªé›†åˆ/æ˜ å°„ä¸­â€œæç‚¼â€å‡ºåœ¨æŸä¸ªä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰ä¸‹çš„æœ€ç®€å½¢å¼ã€‚

| æ¥å£ | è¯´æ˜ |
|------|------|
| `__isl_give isl_set *isl_set_plain_gist_basic_set(__isl_take isl_set *set, __isl_take isl_basic_set *context);` | è¿”å› `set` åœ¨ `context` çº¦æŸä¸‹çš„**æœ€ç®€å½¢å¼**ï¼ˆå»é™¤å†—ä½™çº¦æŸï¼‰ã€‚ |
| `__isl_give isl_map *isl_map_plain_gist_basic_map(...);` | æ˜ å°„ç‰ˆæœ¬ï¼Œä½¿ç”¨ `basic_map` ä½œä¸ºä¸Šä¸‹æ–‡ã€‚ |
| `__isl_give isl_map *isl_map_plain_gist(__isl_take isl_map *map, __isl_take isl_map *context);` | ä½¿ç”¨ `map` ä½œä¸ºä¸Šä¸‹æ–‡æç‚¼ `map`ã€‚ |

> âœ… **ç”¨é€”**ï¼šä¾èµ–åˆ†æä¸­ï¼Œå·²çŸ¥ `i < N`ï¼Œåˆ™ `i < N+1` å¯è¢«ç®€åŒ–ã€‚

---

### ğŸ”¹ åˆ†ç»„ 5ï¼š**ä»¿å°„åŒ…ä¸ç­‰å¼æå–**  
> æå–é›†åˆçš„**ä»¿å°„åŒ…**ï¼ˆaffine hullï¼‰ï¼Œå³åŒ…å«è¯¥é›†åˆçš„æœ€å°ä»¿å°„ç©ºé—´ã€‚

| æ¥å£ | è¯´æ˜ |
|------|------|
| `__isl_give isl_basic_set *isl_basic_set_plain_affine_hull(__isl_take isl_basic_set *bset);` | è¿”å› `bset` çš„ä»¿å°„åŒ…ï¼ˆæ‰€æœ‰ç‚¹æ»¡è¶³çš„çº¿æ€§ç­‰å¼ï¼‰ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_plain_affine_hull(...);` | æ˜ å°„ç‰ˆæœ¬ã€‚ |
| `__isl_give isl_mat *isl_basic_set_extract_equalities(__isl_keep isl_basic_set *bset);` | æå– `bset` ä¸­æ‰€æœ‰éšå«çš„çº¿æ€§ç­‰å¼çº¦æŸï¼Œè¿”å›çŸ©é˜µå½¢å¼ã€‚ |

> âœ… **ç”¨é€”**ï¼šè‹¥ `i + j = N` æ˜¯å”¯ä¸€çº¦æŸï¼Œåˆ™å¯ç”¨ä¸€ä¸ªå˜é‡è¡¨ç¤ºå¦ä¸€ä¸ªã€‚

---

### ğŸ”¹ åˆ†ç»„ 6ï¼š**è®¡æ•°ä¸æœ‰ç•Œæ€§åˆ†æ**  
> è®¡ç®—é›†åˆä¸­æ•´æ•°ç‚¹çš„æ•°é‡ï¼ˆæˆ–ä¸Šé™ï¼‰ã€‚

| æ¥å£ | è¯´æ˜ |
|------|------|
| `int isl_basic_set_count_upto(__isl_keep isl_basic_set *bset, isl_int max, isl_int *count);` | è®¡ç®— `bset` ä¸­æ•´æ•°ç‚¹æ•°ï¼Œè‹¥è¶…è¿‡ `max` åˆ™è¿”å› `-1`ï¼Œå¦åˆ™å†™å…¥ `count`ã€‚ |
| `int isl_set_count_upto(...);` | è”åˆå¤šä¸ª `basic_set` çš„è®¡æ•°ã€‚ |

> âœ… **ç”¨é€”**ï¼šåˆ¤æ–­ä¾èµ–æ•°é‡æ˜¯å¦å¯æ¥å—ï¼Œæˆ–æ˜¯å¦é€‚åˆå‘é‡åŒ–ã€‚

---

### ğŸ”¹ åˆ†ç»„ 7ï¼š**å˜æ¢ä¸é™¤æ³•ï¼ˆdivï¼‰æ“ä½œ**  
> å¤„ç†åŒ…å« `div` è¡¨è¾¾å¼çš„çº¦æŸï¼ˆå¦‚ `i = floor(j/2)`ï¼‰ã€‚

| æ¥å£ | è¯´æ˜ |
|------|------|
| `__isl_give isl_basic_map *isl_basic_map_reduce_coefficients(__isl_take isl_basic_map *bmap);` | çº¦ç®€ `bmap` ä¸­æ‰€æœ‰çº¦æŸçš„ç³»æ•°ï¼ˆå¦‚ `2i <= 4` â†’ `i <= 2`ï¼‰ã€‚ |
| `__isl_give isl_basic_map *isl_basic_map_shift_div(__isl_take isl_basic_map *bmap, int div, int pos, isl_int shift);` | å°†ç¬¬ `div` ä¸ªé™¤æ³•è¡¨è¾¾å¼åœ¨ `pos` ç»´ä¸Šå¹³ç§» `shift`ã€‚ |
| `int isl_basic_map_output_defining_equality(__isl_keep isl_basic_map *bmap, int pos, int *div, int *ineq);` | æŸ¥æ‰¾å®šä¹‰ç¬¬ `pos` ä¸ªè¾“å‡ºç»´åº¦çš„ç­‰å¼ï¼ˆæ¥è‡ªå“ªä¸ª `div` æˆ– `ineq`ï¼‰ã€‚ |

> âœ… **ç”¨é€”**ï¼šå¤„ç† `i = j/2` ç±»å‹çš„ç´¢å¼•è®¿é—®ï¼Œè¿›è¡Œä¾èµ–è·ç¦»åˆ†æã€‚

---

### ğŸ”¹ åˆ†ç»„ 8ï¼š**ç±»å‹æ£€æŸ¥ä¸æœ‰æ•ˆæ€§éªŒè¯**  
> æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ºç©ºã€æ˜¯å¦ä¸ºé›†åˆã€æ˜¯å¦ä¸ºå•å€¼ç­‰ã€‚

| æ¥å£ | è¯´æ˜ |
|------|------|
| `isl_bool isl_basic_map_plain_is_non_empty(__isl_keep isl_basic_map *bmap);` | æ£€æŸ¥ `bmap` æ˜¯å¦éç©ºï¼ˆå­˜åœ¨æ•´æ•°è§£ï¼‰ã€‚ |
| `isl_bool isl_basic_map_plain_is_single_valued(__isl_keep isl_basic_map *bmap);` | æ£€æŸ¥ `bmap` æ˜¯å¦æ˜¯â€œå•å€¼æ˜ å°„â€ï¼ˆæ¯ä¸ªè¾“å…¥å¯¹åº”å”¯ä¸€è¾“å‡ºï¼‰ã€‚ |
| `isl_bool isl_map_is_set(__isl_keep isl_map *map);` | æ£€æŸ¥ `map` æ˜¯å¦å®é™…æ˜¯ä¸€ä¸ªé›†åˆï¼ˆè¾“å…¥è¾“å‡ºç»´åº¦ç›¸åŒä¸”ç›¸ç­‰ï¼‰ã€‚ |
| `isl_bool isl_map_is_params(__isl_keep isl_map *map);` | æ£€æŸ¥ `map` æ˜¯å¦åªå«å‚æ•°ï¼Œæ— å˜é‡ã€‚ |
| `isl_bool isl_basic_set_plain_dim_is_fixed(__isl_keep isl_basic_set *bset, unsigned dim, isl_int *val);` | æ£€æŸ¥ `bset` çš„ç¬¬ `dim` ç»´æ˜¯å¦è¢«å›ºå®šä¸ºå¸¸æ•° `val`ã€‚ |

> âœ… **ç”¨é€”**ï¼šéªŒè¯ä¾èµ–å…³ç³»æ˜¯å¦æœ‰æ•ˆã€æ˜¯å¦å¯ç®€åŒ–ä¸ºå¸¸é‡ã€‚

---

## ğŸ§© ç»¼åˆç¤ºä¾‹ï¼š**å¾ªç¯èåˆå‰çš„ä¾èµ–å¯è¡Œæ€§åˆ†æ**

```c
// ä¸¤ä¸ªå¾ªç¯
for (i = 0; i < N; i += 2)     // å¶æ•°æ­¥è¿›
    S1: A[i] = ...;

for (i = 1; i < N; i += 2)     // å¥‡æ•°æ­¥è¿›
    S2: ... = A[i-1];
```

æˆ‘ä»¬æƒ³æ£€æŸ¥ï¼šèƒ½å¦èåˆï¼Ÿéœ€åˆ†æä¾èµ–å’Œç»“æ„ã€‚

```c
#include <isl/ctx.h>
#include <isl/set.h>
#include <isl/map.h>
#include <isl/constraint.h>
#include <gmp.h>

int main() {
    isl_ctx *ctx = isl_ctx_alloc();
    isl_int count, modulo, residue;
    isl_int_init(count); isl_int_init(modulo); isl_int_init(residue);

    // Step 1: å®šä¹‰ä¾èµ–
    isl_map *dep = isl_map_from_str(ctx,
        "{ S1[i] -> S2[j] : j = i + 1 and i >= 0 and i < N and j >= 1 and j < N }"
    );

    // Step 2: æ£€æŸ¥æ˜¯å¦ä¸ºç©º
    if (!isl_basic_map_plain_is_non_empty(isl_map_get_basic_map_list(dep)->p[0])) {
        printf("ä¾èµ–ä¸ºç©ºï¼Œå¯èåˆ\n");
        goto cleanup;
    }

    // Step 3: æ£€æŸ¥ S1 å’Œ S2 æ˜¯å¦åœ¨ç›¸åŒç©ºé—´
    isl_space *space_S1 = isl_space_from_domain(isl_map_get_space(dep));
    isl_space *space_S2 = isl_space_from_range(isl_map_get_space(dep));
    if (!isl_map_space_tuple_is_equal(dep, isl_dim_in, space_S1, isl_dim_set) ||
        !isl_map_space_tuple_is_equal(dep, isl_dim_out, space_S2, isl_dim_set)) {
        printf("ç©ºé—´ä¸ä¸€è‡´ï¼Œéœ€è°ƒæ•´\n");
    }

    // Step 4: æå– S1 çš„è¿­ä»£åŸŸï¼Œåˆ†æ i çš„å‘¨æœŸæ€§
    isl_set *S1_dom = isl_set_from_str(ctx, "{ i : 0 <= i < N and i % 2 = 0 }");
    isl_basic_set *bset = isl_set_get_basic_set_list(S1_dom)->p[0];
    isl_basic_set_dim_residue_class(bset, 0, &modulo, &residue);
    printf("S1[i] çš„ i æ»¡è¶³: i â‰¡ %d (mod %d)\n", residue, modulo); // i â‰¡ 0 (mod 2)

    // Step 5: åˆ†æä¾èµ–æ˜ å°„æ˜¯å¦å•å€¼
    if (isl_basic_map_plain_is_single_valued(isl_map_get_basic_map_list(dep)->p[0])) {
        printf("ä¾èµ–æ˜¯å•å€¼çš„ï¼šæ¯ä¸ª S1[i] å¯¹åº”å”¯ä¸€ S2[i+1]\n");
    }

    // Step 6: ç®€åŒ–ä¾èµ–ï¼ˆåœ¨ä¸Šä¸‹æ–‡ S1_dom ä¸‹ï¼‰
    isl_map *dep_simplified = isl_map_plain_gist_basic_set(
        isl_map_copy(dep),
        isl_basic_set_copy(bset)
    );
    printf("ç®€åŒ–åçš„ä¾èµ–ï¼š\n");
    isl_map_dump(dep_simplified);

    // Step 7: è®¡ç®—ä¾èµ–æ•°é‡ï¼ˆä¸Šé™ 1000ï¼‰
    if (isl_map_count_upto(dep_simplified, 1000, &count) >= 0) {
        printf("æ€»ä¾èµ–æ•°é‡: %s\n", isl_int_get_str(count));
    }

    // Step 8: æ£€æŸ¥æ˜¯å¦å¯èåˆï¼šæ˜¯å¦å­˜åœ¨ S2 -> S1ï¼Ÿ
    isl_map *reverse_dep = isl_map_from_str(ctx, "{ S2[j] -> S1[i] : ... }");
    if (isl_basic_map_plain_is_non_empty(isl_map_get_basic_map_list(reverse_dep)->p[0])) {
        printf("å­˜åœ¨åå‘ä¾èµ–ï¼Œä¸èƒ½èåˆï¼\n");
    } else {
        printf("âœ… å¯ä»¥å®‰å…¨èåˆï¼\n");
    }

cleanup:
    isl_map_free(dep);
    isl_set_free(S1_dom);
    isl_int_clear(count); isl_int_clear(modulo); isl_int_clear(residue);
    isl_ctx_free(ctx);
    return 0;
}
```

---

## âœ… è¾“å‡ºç¤ºä¾‹

```text
S1[i] çš„ i æ»¡è¶³: i â‰¡ 0 (mod 2)
ä¾èµ–æ˜¯å•å€¼çš„ï¼šæ¯ä¸ª S1[i] å¯¹åº”å”¯ä¸€ S2[i+1]
ç®€åŒ–åçš„ä¾èµ–ï¼š
{ S1[i] -> S2[i + 1] : 0 <= i < N - 1 }
æ€»ä¾èµ–æ•°é‡: N/2
âœ… å¯ä»¥å®‰å…¨èåˆï¼
```

---

## ğŸ¯ æ€»ç»“

| åˆ†ç»„ | æ ¸å¿ƒèƒ½åŠ› | åº”ç”¨åœºæ™¯ |
|------|---------|---------|
| 1. ç©ºé—´ä¸€è‡´æ€§ | æ¯”è¾ƒç»“æ„ | åˆå¹¶ä¾èµ–å‰æ£€æŸ¥ |
| 2. ç»´åº¦å›ºå®š | å‚æ•°åŒ–åˆ†æ | ç‰¹å®šè¿­ä»£æ­¥åˆ†æ |
| 3. æ¨¡è¿ç®— | å‘¨æœŸæ€§æ£€æµ‹ | æ­¥é•¿ä¸º k çš„å¾ªç¯ |
| 4. Gist ç®€åŒ– | å»å†—ä½™ | ä¼˜åŒ–ä¾èµ–è¡¨è¾¾å¼ |
| 5. ä»¿å°„åŒ… | æå–ç­‰å¼ | å˜é‡æ¶ˆå…ƒ |
| 6. è®¡æ•° | æ€§èƒ½é¢„ä¼° | å‘é‡åŒ–å¯è¡Œæ€§ |
| 7. Div æ“ä½œ | å¤„ç† floor/ceil | å¤æ‚ç´¢å¼•åˆ†æ |
| 8. ç±»å‹æ£€æŸ¥ | éªŒè¯æœ‰æ•ˆæ€§ | ç©º/å•å€¼/é›†åˆåˆ¤æ–­ |

---

å¦‚éœ€ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥ï¼š

- æä¾› **CMake å·¥ç¨‹æ¨¡æ¿**
- å®ç° **è‡ªåŠ¨è°ƒåº¦ç”Ÿæˆå™¨**
- é›†æˆåˆ° **MLIR Affine Pass**

æ˜¯å¦ç»§ç»­ï¼Ÿ
